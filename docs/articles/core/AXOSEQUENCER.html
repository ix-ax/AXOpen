<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>AxoSequencer | System.Dynamic.ExpandoObject </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="AxoSequencer | System.Dynamic.ExpandoObject ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../images/favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/custom.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">  
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
  
  <meta property="docfx:rel" content="../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../index.html">
                <p class="text-logo">AXOpen</p>
              </a>            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="axosequencer" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="1">AxoSequencer</h1>

<p sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="3">AxoSequencer is an AxoCordinator class provides triggering the AxoStep-s inside the sequence in the order they are written.</p>
<p sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="5">AxoSequencer extends from AxoTask so it also has to be initialized by calling its <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="5">Initialize()</code> method and started using its <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="5">Invoke()</code> method.</p>
<p sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="7">AxoSequencer contains following methods:</p>
<ul sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="8">
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="8"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="8">Open()</code>: this method must be called cyclically before any logic. All the logic of the sequencers must be placed inside the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="8">if</code> condition. It provides some configuration mechanism that ensures that the steps are going to be executed in the order, they are written. During the very first call of the sequence, no step is executed as the AxoSequencer is in the configuring state. From the second context cycle after the AxoSequencer has been invoked the AxoSequencer change its state to running and starts the execution from the first step upto the last one. When AxoSequencer is in running state, order of the step cannot be changed.</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="9"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="9">MoveNext()</code>: Terminates the currently executed step and moves the AxoSequencer's pointer to the next step in order of execution.</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="10"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="10">RequestStep()</code>: Terminates the currently executed step and set the AxoSequencer's pointer to the order of the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="10">RequestedStep</code>. When the order of the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="10">RequestedStep</code> is higher than the order of the currently finished step (the requested step is &quot;after&quot; the current one) the requested step is started in the same context cycle. When the order of the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="10">RequestedStep</code> is lower than the order of the currently finished step (the requested step is &quot;before&quot; the current one) the requested step is started in the next context cycle.</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="11"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="11">CompleteSequence()</code>: Terminates the currently executed step, completes (finishes) the execution of this AxoSequencer and set the coordination state to Idle. If the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="11">SequenceMode</code> of the AxoSequencer is set to <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="11">Cyclic</code>, following <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="11">Open()</code> method call in the next context cycle switch it again into the configuring state, reasign the order of the individual steps (even if the orders have been changed) and subsequently set AxoSequencer back into the running state. If the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="11">SequenceMode</code> of the AxoSequencer is set to <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="11">RunOnce</code>, terminates also execution of the AxoSequencer itself.</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="12">`GetCoordinatorState()': Returns the current state of the AxoSequencer.
<ul sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="13">
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="13"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="13">Idle</code></li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="14"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="14">Configuring</code>: assigning the orders to the steps, no step is executed.</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="15"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="15">Running</code>: orders to the steps are already assigned, step is executed.</li>
</ul>
</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="16"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="16">SetSteppingMode()</code>: Sets the stepping mode of the AxoSequencer. Following values are possible.
<ul sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="17">
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="17"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="17">None</code>:</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="18"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="18">StepByStep</code>: if this mode is choosen, each step needs to be started by the invocation of the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="18">StepIn</code> commmand.</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="19"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="19">Continous</code>: if this mode is choosen (default), each step is started automaticcaly after the previous one has been completed.</li>
</ul>
</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="20"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="20">GetSteppingMode()</code>: Gets the current stepping mode of the AxoSequencer.</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="21"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="21">SetSequenceMode()</code>: Sets the sequence mode of the AxoSequencer. Following values are possible.
<ul sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="22">
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="22"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="22">None</code>:</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="23"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="23">RunOnce</code>: if this mode is choosen, after calling the method <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="23">CompleteSequence()</code> the execution of the sequence is terminated.</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="24"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="24">Cyclic</code>: if this mode is choosen (default), after calling the method <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="24">CompleteSequence()</code> the execution of the sequence is &quot;reordered&quot; and started from beginning.</li>
</ul>
</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="25"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="25">GetSequenceMode()</code>: Gets the current sequence mode of the AxoSequencer.</li>
<li sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="26"><code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="26">GetNumberOfConfiguredSteps()</code>: Gets the number of the configured steps in the sequence.</li>
</ul>
<h3 id="example-of-using-axosequencer" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="28">Example of using AxoSequencer</h3>
<h4 id="example-of-the-declaration-of-the-axosequencer-and-axostep" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="29">Example of the declaration of the AxoSequencer and AxoStep</h4>
<pre><code class="lang-smalltalk" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="30">CLASS AxoSequencerDocuExample EXTENDS  AXOpen.Core.AxoContext
    VAR PUBLIC
        _mySequencer : AXOpen.Core.AxoSequencer;
        _step_1 : AxoStep;
        _step_2 : AxoStep;
        _step_3 : AxoStep;
        _myCounter : ULINT;
    END_VAR
END_CLASS
</code></pre><h4 id="initialization" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="31">Initialization</h4>
<p sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="32">Initialization of the context needs to be called first. It does not need to be called cyclically, just once.</p>
<pre><code class="lang-smalltalk" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="33">METHOD PUBLIC Initialize
    _mySequencer.Initialize(THIS);
    _step_1.Initialize(THIS);
    _step_2.Initialize(THIS);
    _step_3.Initialize(THIS);
END_METHOD
</code></pre><h4 id="open" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="34">Open</h4>
<p sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="35">The <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="35">Open()</code> method must be called cyclically before any logic. All the logic of the sequencers must be placed inside the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="35">if</code> condition, as follows.</p>
<pre><code class="lang-smalltalk" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="36">THIS.Initialize();    
IF _mySequencer.Open() THEN
    //All sequence logic needs to be placed inside the condition
    _myCounter := _myCounter + ULINT#1;

    IF _step_1.Execute(_mySequencer) THEN
        IF (_myCounter &gt; ULINT#50) THEN
            _mySequencer.MoveNext();
        END_IF;
    END_IF;

    IF _step_2.Execute(_mySequencer) THEN
        IF (_myCounter &gt; ULINT#100) THEN
            _mySequencer.MoveNext();
        END_IF;
    END_IF;

    IF _step_3.Execute(_mySequencer) THEN
        IF (_myCounter &gt; ULINT#150) THEN
            _myCounter := ULINT#0;
            _mySequencer.CompleteSequence();
        END_IF;
    END_IF;
END_IF;
</code></pre><h4 id="step" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="37">Step</h4>
<p sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="38">Example of the most simple use of the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="38">Execute()</code> method of the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="38">AxoStep</code> class, only with the AxoCoordinator defined.</p>
<pre><code class="lang-smalltalk" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="39">IF _step_1.Execute(_mySequencer) THEN
    _myCounter := _myCounter + ULINT#1;
    // do something
    IF (_myCounter MOD ULINT#5) = ULINT#0 THEN
        // continue to the next step of the sequence
        _mySequencer.MoveNext();
    END_IF;
END_IF;
</code></pre>
<p sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="40">Example of use of the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="40">Execute()</code> method of the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="40">AxoStep</code> class with the Enable condition.
This step is going to be executed just in the first run of the sequence, as during the second one, the Enable parameter will have the value of FALSE.</p>
<pre><code class="lang-smalltalk" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="42">IF _step_2.Execute(coord := _mySequencer, Enable := _myCounter &lt;= ULINT#20) THEN
    _myCounter := _myCounter + ULINT#1;
    IF _myCounter = ULINT#20 THEN
        // Jumping to step 1. As it is jumping backwards, the execution of step 1  
        // is going to be started in the next context cycle.
        _mySequencer.RequestStep(_step_1);
    END_IF;
END_IF;
</code></pre>
<p sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="43">Example of use of the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="43">Execute()</code> method of the <code sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="43">AxoStep</code> class with all three parameters defined.</p>
<pre><code class="lang-smalltalk" sourcefile="articles/core/AXOSEQUENCER.md" sourcestartlinenumber="44">IF _step_3.Execute(coord := _mySequencer, Enable := TRUE, Description := 'This is a description of the step 3' ) THEN
    _myCounter := _myCounter + ULINT#1;
    IF (_myCounter MOD ULINT#7) = ULINT#0 THEN
        // Finalize the sequence and initiate the execution from the first step.
        _mySequencer.CompleteSequence();
    END_IF;
END_IF;
</code></pre></article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/ix-ax/AXOpen/blob/dev/docfx/articles/core/AXOSEQUENCER.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
       Generated by DocFx. © Peter Kurhajec, MTS spol. s r.o., and awesome contributors
      
          </div>
        </div>
      </footer>
    </div>
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js"></script>
    <script src="https://unpkg.com/highlightjs-dotnetconfig@0.9.3/dist/dotnetconfig.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
    <script type="text/javascript" src="https://unpkg.com/mermaid@8.10.2/dist/mermaid.min.js" integrity="sha384-nzpOk138h0/O14Ig1PAUlf1XSo5T+XvpBUVkpLaU40QBvMgrNkSKusdNAomDLEd2" crossorigin="anonymous"></script>
    <script>
    mermaid.initialize({
    startOnLoad: false
    });
    mermaid.init(undefined, ".lang-mermaid");
    </script>  </body>
</html>
