<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>AXOpen.Data | System.Dynamic.ExpandoObject </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="AXOpen.Data | System.Dynamic.ExpandoObject ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../images/favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/custom.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">  
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
  
  <meta property="docfx:rel" content="../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../index.html">
                <p class="text-logo">AXOpen</p>
              </a>            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="axopendata" sourcefile="articles/data/README.md" sourcestartlinenumber="1"><strong sourcefile="articles/data/README.md" sourcestartlinenumber="1">AXOpen.Data</strong></h1>

<p sourcefile="articles/data/README.md" sourcestartlinenumber="3"><strong sourcefile="articles/data/README.md" sourcestartlinenumber="3">AXOpen.Data</strong> provides data exchange between the controller and an arbitrary repository.</p>
<p sourcefile="articles/data/README.md" sourcestartlinenumber="5"><code sourcefile="articles/data/README.md" sourcestartlinenumber="5">AXOpen.Data</code> library provides a simple yet powerful data exchange between PLC and an arbitrary data repository. It includes the implementation of a series of repository operations known as CRUD (Create Read Update Delete), accessible directly from the PLC.</p>
<h2 id="benefits" sourcefile="articles/data/README.md" sourcestartlinenumber="7">Benefits</h2>
<p sourcefile="articles/data/README.md" sourcestartlinenumber="9">The main benefit of this solution is data scalability; once the repository is set up, any modification of the data structure(s) will result in an automatic update of mapped objects. And therefore, there is no need for additional coding and configuration.</p>
<h2 id="how-it-works" sourcefile="articles/data/README.md" sourcestartlinenumber="11">How it works</h2>
<p sourcefile="articles/data/README.md" sourcestartlinenumber="13">The basic PLC block is <code sourcefile="articles/data/README.md" sourcestartlinenumber="13">AxoDataExchange</code>, which has its .NET counterpart (or .NET twin) that handles complex repository operations using a modified <code sourcefile="articles/data/README.md" sourcestartlinenumber="13">AxoRemoteTask</code>, which is a form of RPC (Remote Procedure Call), that allows you to execute the code from the PLC in a remote .NET application.</p>
<h2 id="implemented-repositories" sourcefile="articles/data/README.md" sourcestartlinenumber="15">Implemented repositories</h2>
<p sourcefile="articles/data/README.md" sourcestartlinenumber="17">The <code sourcefile="articles/data/README.md" sourcestartlinenumber="17">AxoDataExchange</code> uses a predefined interface, <code sourcefile="articles/data/README.md" sourcestartlinenumber="17">IRepository</code>, that allows for the virtually unlimited implementation of different target repositories.</p>
<p sourcefile="articles/data/README.md" sourcestartlinenumber="19">At this point, AXOpen supports these repositories directly:</p>
<ul sourcefile="articles/data/README.md" sourcestartlinenumber="21">
<li sourcefile="articles/data/README.md" sourcestartlinenumber="21">InMemory</li>
<li sourcefile="articles/data/README.md" sourcestartlinenumber="22">Json</li>
<li sourcefile="articles/data/README.md" sourcestartlinenumber="23">MongoDB</li>
<li sourcefile="articles/data/README.md" sourcestartlinenumber="24">RavenDB</li>
</ul>
<h1 id="axodataexchange" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="1">AxoDataExchange</h1>
<h2 id="getting-started" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="3">Getting started</h2>
<h3 id="data-exchange-manager" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="5">Data exchange manager</h3>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="7">For the data exchange to work, we must create a class extending the <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="7">AxoDataExchange</code>.</p>
<pre><code class="lang-smalltalk" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="9">CLASS AxoProcessDataManager EXTENDS AXOpen.Data.AxoDataExchange 
    VAR PUBLIC             
        {#ix-generic:TOnline}              
        {#ix-generic:TPlain as POCO}
        {#ix-attr:[AxoDataEntityAttribute]}
        Data       : AxoProductionData;    // &lt;-  Manager will operate on this member.                   
    END_VAR  
END_CLASS
</code></pre><h3 id="data-exchange-object" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="11">Data exchange object</h3>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="13">We will also need to add our data entity variable, which contains the data that we want to exchange between PLC and the repository. This variable must be annotated with <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="13">AxoDataEntityAttribute</code> and   <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="13">#ix-generic:TOnline</code> and <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="13">#ix-generic:TPlain as POCO</code> attributes that provide type information for the data exchange.</p>
<div class="NOTE" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="15">
<h5>Note</h5>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="16"><code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="16">AxoDataEntityAttribute</code>, <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="16">#ix-generic:TOnline</code> and <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="16">#ix-generic:TPlain as POCO</code> must be attributed to only one member <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="16">AxoDataExchange</code> object and is used to locate data object that contains data to be exchanged between PLC and the target repository.
An exception is thrown when <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="17">DataEntityAttribute</code> is missing or multiple members have the annotation.</p>
</div>
<div class="NOTE" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="20">
<h5>Note</h5>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="21">The 'Data' variable must be of a type that extends <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="21">AxoDataEntity</code>.</p>
</div>
<pre><code class="lang-smalltalk" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="23">CLASS AxoProductionData EXTENDS AXOpen.Data.AxoDataEntity
    VAR PUBLIC
        {#ix-set:AttributeName = &quot;Some string data&quot;}
        SomeData : STRING;
        {#ix-set:AttributeName = &quot;Some number&quot;}
        SomeNumber : INT;
        {#ix-set:AttributeName = &quot;Some boolean&quot;}
        SomeBool : BOOL;
    END_VAR 
END_CLASS
</code></pre><h3 id="data-exchange-initialization-in-plc" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="25">Data exchange initialization in PLC</h3>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="27">As mentioned earlier, we use remote calls to execute the CRUD operations. These calls are a variant of <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="27">AxoTask</code>, which allows for invoking a C# code. We will now need to create an instance of <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="27">AxoProcessDataManager</code> in a context object (<code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="27">AxoContext</code>) (or as a member of another class that derives from <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="27">AxoObject</code>). We will also need to call <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="27">DataManager</code> in the Main method of appropriate context.</p>
<pre><code class="lang-smalltalk" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="29">CLASS PUBLIC Context EXTENDS AXOpen.Core.AxoContext
    VAR PUBLIC
        DataManager : AxoProcessDataManager;
    END_VAR
    
    METHOD OVERRIDE Main 
        DataManager.Run(THIS);
    END_METHOD          
END_CLASS
</code></pre>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="31">Instantiate context in a configuration</p>
<pre><code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="32">CONFIGURATION MyConfiguration
    VAR_GLOBAL
        _myContext : Context;       
    END_VAR
END_CONFIGURATION
</code></pre>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="40">Execute the context in a program</p>
<pre><code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="41">PROGRAM MAIN
VAR_EXTERNAL
    _myContext : Context;
END_VAR

_myContext.Run();

</code></pre>
<h3 id="data-exchange-initialization-in-net" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="51">Data exchange initialization in .NET</h3>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="53">At this point, we have everything ready in the PLC.</p>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="55">We must now tell the <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="55">DataManager</code> what repository we will use. We will work with data stored in files in JSON format.</p>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="57">Let's create a configuration for the repository and initialize remote data exchange:</p>
<pre><code class="lang-csharp" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="60">var exampleRepositorySettings =
    new AXOpen.Data.Json.JsonRepositorySettings&lt;Pocos.AxoDataExamplesDocu.AxoProductionData&gt;(
        Path.Combine(Environment.CurrentDirectory, &quot;exampledata&quot;));

var exampleRepository = 
    Ix.Repository.Json.Repository.Factory(exampleRepositorySettings);

Entry.Plc.AxoDataExamplesDocu.DataManager.InitializeRemoteDataExchange(exampleRepository);
</code></pre>
<div class="NOTE" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="63">
<h5>Note</h5>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="64"><code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="64">MyData</code> should be of type from <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="64">Pocos</code>.</p>
</div>
<h3 id="usage" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="67">Usage</h3>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="69">Now we can freely shuffle the data between PLC and the local folder.</p>
<pre><code class="lang-smalltalk" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="71">CLASS UseManager
    VAR
        _create : BOOL;
        _read : BOOL;
        _update : BOOL;
        _delete : BOOL;
        _id : STRING;
    END_VAR   

    METHOD Use
        VAR_IN_OUT
            DataManager : AxoProcessDataManager;
        END_VAR    
        IF(_create) THEN
            IF(DataManager.Create(_id).IsDone()) THEN
                _create := FALSE;
            END_IF;
        END_IF;
        
        IF(_read) THEN
            IF(DataManager.Read(_id).IsDone()) THEN
                _read := FALSE;
            END_IF;
        END_IF;
        
        IF(_update) THEN
            IF(DataManager.Update(_id).IsDone()) THEN
                _update := FALSE;
            END_IF;
        END_IF;
        
        IF(_delete) THEN
            IF(DataManager.Delete(_id).IsDone()) THEN
                _delete := FALSE;
            END_IF;
        END_IF;
    END_METHOD        
END_CLASS
</code></pre><h2 id="data-visualization" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="73">Data visualization</h2>
<h3 id="automated-rendering-using-renderablecontentcontrol" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="75">Automated rendering using <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="75">RenderableContentControl</code></h3>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="77">With <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="77">Command</code> presentation type, options exist for adding, editing, and deleting records.</p>
<pre><code class="lang-csharp" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="79">&lt;RenderableContentControl Context=&quot;Entry.Plc.AxoDataExamplesDocu.DataManager&quot; Presentation=&quot;Command&quot;&gt;&lt;/RenderableContentControl&gt;
</code></pre>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="81"><img src="../../images/Command.png" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="81" alt="Command"></p>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="83">If you use <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="83">Status</code> presentation type, data will be only displayed and cannot be manipulated.</p>
<pre><code class="lang-csharp" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="85">&lt;RenderableContentControl Context=&quot;Entry.Plc.AxoDataExamplesDocu.DataManager&quot; Presentation=&quot;Status&quot;&gt;&lt;/RenderableContentControl&gt;
</code></pre>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="87"><img src="../../images/Status.png" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="87" alt="Status"></p>
<h3 id="custom-columns" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="89">Custom columns</h3>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="91">There is a possibility to add custom columns if it is needed. You must add <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="91">AXOpen.Data.ColumnData</code> view as a child in <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="91">DataView</code>. The <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="91">BindingValue</code> must be set in <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="91">ColumnData</code> and contains a string representing the attribute name of custom columns. If you want to add a custom header name, you can set the name in <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="91">HeaderName</code> attribute. Also, there is an attribute to make the column not clickable, which is clickable by default. The example using all attributes:</p>
<pre><code class="lang-csharp" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="94">&lt;DataExchangeView Vm=&quot;VM&quot; Presentation=&quot;Command&quot;&gt;
    &lt;ColumnData HeaderName=&quot;Some data&quot; BindingValue=&quot;SomeData&quot; Clickable=&quot;false&quot; /&gt;
    &lt;ColumnData HeaderName=&quot;A number&quot; BindingValue=&quot;SomeNumber&quot; Clickable=&quot;false&quot; /&gt;
    &lt;ColumnData HeaderName=&quot;Yes/No&quot; BindingValue=&quot;SomeBool&quot; Clickable=&quot;false&quot; /&gt;
&lt;/DataExchangeView&gt;
</code></pre>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="96">When adding data view manually, you will need to create ViewModel:</p>
<pre><code class="lang-csharp" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="98">@code {
    protected DataExchangeViewModel VM { get; } = new () { Model = Entry.Plc.AxoDataExamplesDocu.DataManager };
}

</code></pre>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="101"><img src="../../images/CustomColumns.png" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="101" alt="Custom columns"></p>
<!-- ### Export/Import

If you want to be able to export data, you must add `CanExport` attribute with `true` value. Like this:

~~~
<DataView Vm="@ViewModel.DataViewModel" Presentation="Command" CanExport="true" />
~~~

With this option, buttons for export and import data will appear. After clicking on the export button, the `csv` file will be created, which contains all existing records. If you want to import data, you must upload `csv` file with an equal data structure as we get in the export file.

![Export](~/images/Export.png)

> [!IMPORTANT]
> Export and import function will create high load on the application. Don't use with large datasets. These function can be used only on a limited number (100 or less) documents. Typical used would be for recipes and settings, but not for large collections of production or event data. -->
<h3 id="modal-detail-view" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="118">Modal detail view</h3>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="120">The Detail View is default shown like modal view. That means if you click on some record, the modal window with a detail view will be shown. If necessary, this option can be changed with <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="120">ModalDetailView</code> attribute. This change will show a detail view under the record table. Example with <code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="120">ModalDetailView</code> attribute:</p>
<pre><code sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="122">&lt;DataView Vm=&quot;@ViewModel.DataViewModel&quot; Presentation=&quot;Command&quot; ModalDetailView=&quot;false&quot; /&gt;
</code></pre>
<p sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="126"><img src="../../images/NotModalDetailView.png" sourcefile="articles/data/AxoDataExchange.md" sourcestartlinenumber="126" alt="Not Modal detail view"></p>
<h1 id="axodatafragmentexchange" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="1">AxoDataFragmentExchange</h1>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="3">Fragment data exchange allows to group of multiple data managers into a single object and perform repository operations jointly on all nested repositories.</p>
<h3 id="data-fragment-exchange-manager" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="5">Data fragment exchange manager</h3>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="7">We must create a class extending the <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="7">AxoDataFragmentExchange</code> for the data fragment exchange to work.</p>
<pre><code class="lang-smalltalk" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="9">CLASS ProcessDataManager EXTENDS AXOpen.Data.AxoDataFragmentExchange
    VAR PUBLIC                    
        {#ix-attr:[AXOpen.Data.AxoDataFragmentAttribute]}
        SharedHeader : SharedDataHeaderManger;            
        {#ix-attr:[AXOpen.Data.AxoDataFragmentAttribute]}
        Station_1 : Station_1_ProcessDataManger;
    END_VAR
END_CLASS
</code></pre>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="11"><strong sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="11">Nesting AxoDataExchanger(s)</strong></p>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="13">AxoDataFragmenExchange can group several data managers where each can point to a different repository. Nested data managers must be set up as explained <a href="AxoDataExchange.html#data-exchange-manager" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="13">here</a>.</p>
<div class="NOTE" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="15">
<h5>Note</h5>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="16">Note that each data manager must be annotated with <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="16">AXOpen.Data.AxoDataFragmentAttribute</code> that will provide information to the parent manager that the member takes part in data operations.</p>
</div>
<div class="IMPORTANT" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="18">
<h5>Important</h5>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="19">First data manager declared as a fragment is considered a master fragment. The overview and list of existing data are retrieved only from the master fragment.</p>
</div>
<h3 id="initialization-and-handling-in-the-controller" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="21">Initialization and handling in the controller</h3>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="23">We will now need to create an instance of <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="23">AxoDataFragmentExchange</code> in a context object (<code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="23">AxoContext</code>) (or as a member of another class that derives from <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="23">AxoObject</code>). We will also need to call <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="23">AxoDataFragmentExchangeContext</code> in the Main method of appropriate context.</p>
<pre><code class="lang-smalltalk" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="25">CLASS AxoDataFragmentExchangeContext EXTENDS AXOpen.Core.AxoContext
    VAR PUBLIC
        ProcessData : ProcessDataManager;           
    END_VAR
            
    METHOD PROTECTED OVERRIDE Main
        // This is required to run cyclically. Method provides handling of data exchange tasks.
        ProcessData.Run(THIS);                                     
    END_METHOD
END_CLASS
</code></pre>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="27">Instantiate context in a configuration</p>
<pre><code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="28">CONFIGURATION MyConfiguration
    VAR_GLOBAL
        _myContext : AxoDataFragmentExchangeContext;       
    END_VAR
END_CONFIGURATION
</code></pre>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="36">Execute the context in a program.</p>
<pre><code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="37">PROGRAM MAIN
VAR_EXTERNAL
    _myContext : AxoDataFragmentExchangeContext;
END_VAR

_myContext.Run();

</code></pre>
<h3 id="data-exchange-initialization-in-net" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="47">Data exchange initialization in .NET</h3>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="49">At this point, we have everything ready in the PLC.</p>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="51">If the nested data exchange object does not have the repository set previously, we will need to tell the to fragment manager wich repositories we be used by in data exchange. We will work with data stored in files in JSON format.</p>
<pre><code class="lang-csharp" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="54">
var scatteredDataBuilder =
    Entry.Plc.AxoDataFragmentExchangeContext.ProcessData.CreateBuilder&lt;AxoDataFramentsExchangeDocuExample.ProcessDataManager&gt;();

// Setting up repositories
scatteredDataBuilder.SharedHeader.SetRepository(new JsonRepository&lt;Pocos.AxoDataFramentsExchangeDocuExample.SharedDataHeaderData&gt;(
    new AXOpen.Data.Json.JsonRepositorySettings&lt;Pocos.AxoDataFramentsExchangeDocuExample.SharedDataHeaderData&gt;(Path.Combine(Environment.CurrentDirectory, &quot;bin&quot;, &quot;data-framents-docu&quot;, &quot;set&quot;))));
scatteredDataBuilder.Station_1.SetRepository(
    new JsonRepository&lt;Pocos.AxoDataFramentsExchangeDocuExample.Station_1_Data&gt;(
        new AXOpen.Data.Json.JsonRepositorySettings&lt;Pocos.AxoDataFramentsExchangeDocuExample.Station_1_Data&gt;(Path.Combine(Environment.CurrentDirectory, &quot;bin&quot;, &quot;data-framents&quot;, &quot;fm&quot;))));
</code></pre>
<div class="NOTE" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="56">
<h5>Note</h5>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="57"><code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="57">MyData</code> should be of type from <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="57">Pocos</code>.</p>
</div>
<h3 id="usage" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="60">Usage</h3>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="62">Now we can freely shuffle the data between PLC and the local folder.</p>
<pre><code class="lang-smalltalk" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="64"> CLASS UseManager
    VAR
        _create : BOOL;
        _read : BOOL;
        _update : BOOL;
        _delete : BOOL;
        _id : STRING;
    END_VAR   

    METHOD Use
        VAR_IN_OUT
            DataFragmentManager : ProcessDataManager;
        END_VAR    
        IF(_create) THEN
            IF(DataFragmentManager.Create(_id).IsDone()) THEN
                _create := FALSE;
            END_IF;
        END_IF;
        
        IF(_read) THEN
            IF(DataFragmentManager.Read(_id).IsDone()) THEN
                _read := FALSE;
            END_IF;
        END_IF;
        
        IF(_update) THEN
            IF(DataFragmentManager.Update(_id).IsDone()) THEN
                _update := FALSE;
            END_IF;
        END_IF;
        
        IF(_delete) THEN
            IF(DataFragmentManager.Delete(_id).IsDone()) THEN
                _delete := FALSE;
            END_IF;
        END_IF;
    END_METHOD        
END_CLASS
</code></pre><h2 id="data-visualization" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="66">Data visualization</h2>
<h3 id="automated-rendering-using-renderablecontentcontrol" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="68">Automated rendering using <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="68">RenderableContentControl</code></h3>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="70">With <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="70">Command</code> presentation type, options exist for adding, editing, and deleting records.</p>
<pre><code class="lang-csharp" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="72">&lt;RenderableContentControl Context=&quot;Entry.Plc.AxoDataFragmentExchangeContext.ProcessData&quot; Presentation=&quot;Command&quot;&gt;&lt;/RenderableContentControl&gt;
</code></pre>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="74"><img src="../../images/Command.png" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="74" alt="Command"></p>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="76">If you use <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="76">Status</code> presentation type, data will be only displayed and cannot be manipulated.</p>
<pre><code class="lang-csharp" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="78">&lt;RenderableContentControl Context=&quot;Entry.Plc.AxoDataFragmentExchangeContext.ProcessData&quot; Presentation=&quot;Status&quot;&gt;&lt;/RenderableContentControl&gt;
</code></pre>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="80"><img src="../../images/Status.png" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="80" alt="Status"></p>
<h3 id="custom-columns" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="82">Custom columns</h3>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="84">There is a possibility to add custom columns if it is needed. You must add <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="84">AXOpen.Data.ColumnData</code> view as a child in <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="84">DataView</code>. The <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="84">BindingValue</code> must be set in <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="84">ColumnData</code> and contains a string representing the attribute name of custom columns. If you want to add a custom header name, you can set the name in <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="84">HeaderName</code> attribute. Also, there is an attribute to make the column not clickable, which is clickable by default. The example using all attributes:</p>
<pre><code class="lang-csharp" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="87">&lt;DataExchangeView Vm=&quot;VM&quot; Presentation=&quot;Command&quot;&gt;
    &lt;ColumnData HeaderName=&quot;Some data&quot; BindingValue=&quot;SomeData&quot; Clickable=&quot;false&quot; /&gt;
    &lt;ColumnData HeaderName=&quot;A number&quot; BindingValue=&quot;SomeNumber&quot; Clickable=&quot;false&quot; /&gt;
    &lt;ColumnData HeaderName=&quot;Yes/No&quot; BindingValue=&quot;SomeBool&quot; Clickable=&quot;false&quot; /&gt;
&lt;/DataExchangeView&gt;
</code></pre>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="89">When adding data view manually, you will need to create ViewModel:</p>
<pre><code class="lang-csharp" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="91">@code {
        protected DataExchangeViewModel VM { get; } = new() { Model = Entry.Plc.AxoDataFragmentExchangeContext.ProcessData };
}

</code></pre>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="94"><img src="../../images/CustomColumns.png" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="94" alt="Custom columns"></p>
<div class="NOTE" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="96">
<h5>Note</h5>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="97">Custom columns can only added from master fragment (first declared repository).</p>
</div>
<h3 id="modal-detail-view" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="99">Modal detail view</h3>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="101">The Detail View is default shown like modal view. That means if you click on some record, the modal window with a detail view will be shown. If necessary, this option can be changed with <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="101">ModalDetailView</code> attribute. This change will show a detail view under the record table. Example with <code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="101">ModalDetailView</code> attribute:</p>
<pre><code sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="103">&lt;DataExchangeView Vm=&quot;@ViewModel.DataViewModel&quot; Presentation=&quot;Command&quot; ModalDetailView=&quot;false&quot; /&gt;
</code></pre>
<p sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="107"><img src="../../images/NotModalDetailView.png" sourcefile="articles/data/AxoDataFragmentExchange.md" sourcestartlinenumber="107" alt="Not Modal detail view"></p>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/ix-ax/AXOpen/blob/dev/docfx/articles/data/README.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
       Generated by DocFx. Â© Peter Kurhajec, MTS spol. s r.o., and awesome contributors
      
          </div>
        </div>
      </footer>
    </div>
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js"></script>
    <script src="https://unpkg.com/highlightjs-dotnetconfig@0.9.3/dist/dotnetconfig.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
    <script type="text/javascript" src="https://unpkg.com/mermaid@8.10.2/dist/mermaid.min.js" integrity="sha384-nzpOk138h0/O14Ig1PAUlf1XSo5T+XvpBUVkpLaU40QBvMgrNkSKusdNAomDLEd2" crossorigin="anonymous"></script>
    <script>
    mermaid.initialize({
    startOnLoad: false
    });
    mermaid.init(undefined, ".lang-mermaid");
    </script>  </body>
</html>
