name: "axopen.integrations"
version                                                                                                                                                                       : '0.1.4-add-application-templates-for-integration-testing.184'
type: app
targets:
#  - "1500"
#  - llvm
  - axunit
  - plcsim
  - axunit-llvm
dependencies:
  "@ix-ax/axopen.core"                                                                                                                                                                        : '0.1.4-add-application-templates-for-integration-testing.184'
  "@ix-ax/axopen.data"                                                                                                                                                                        : '0.1.4-add-application-templates-for-integration-testing.184'
  "@ix-ax/axopen.probers"                                                                                                                                                                     : '0.1.4-add-application-templates-for-integration-testing.184'
  "@ax/sdk": ^3.0.11
  "@ax/sld": ^0.14.2
variables:
  APAX_BUILD_ARGS: [ -d ]

scripts:
  ixc:
    - dotnet tool restore
    - dotnet ixc
  download:
    - apax sld --accept-security-disclaimer -t $AXTARGET -i
      $AXTARGETPLATFORMINPUT -r --default-server-interface
  check+download: |
    if [ $AXTARGET ]; then
      if [ $AXTARGETPLATFORMINPUT ]; then
        if ping -n 1 $AXTARGET &> /dev/null; then
          echo "Downloading from:" $AXTARGETPLATFORMINPUT "=>" $AXTARGET
          apax download
        else
          echo "Target with IP address:" $AXTARGET "is not accessible. No download is going to be performed!!!"
        fi
      else
        echo "Environment variable AXTARGETPLATFORMINPUT not defined!!!"
      fi
    else
      echo "Environment variable AXTARGET not defined!!!"
    fi
  do-it-all:
    - apax install
    - apax build
    - apax download
  postbuild:
    - apax ixc
  watch:
    - dotnet watch --project ..\\src\\AXOpen.Integrations.Blazor\\axopen_integrations_blazor.csproj
  rr:
    - apax build
    - apax download
    - apax watch
  fr:
    - ..\\scripts\\StartPlcSimAdvCli.exe
    - apax install
    - apax rr
  da:
    - apax do-it-all
