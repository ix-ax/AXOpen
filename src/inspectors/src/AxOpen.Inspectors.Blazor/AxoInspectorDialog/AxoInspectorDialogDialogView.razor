@namespace AXOpen.Inspectors
@using AXOpen.Core.Blazor.AxoDialogs
@using Microsoft.AspNetCore.Components.Authorization;
@inherits AxoDialogBaseView<AxoInspectorDialog>
@inject AuthenticationStateProvider _asp


<div class="border border-2 rounded">
   
    <h3>Inspection failed, you will need to decide what's next...</h3>
    <p>@Component.Symbol</p>

    <div class="d-flex justify-content-center ">

        <div>

            <h5>@Description</h5>
            @if (Inspector != null)
            {
                <RenderableContentControl Context="Inspector" Presentation="Status" />
            }
            else
            {
                <p>Loading inspector... if it's taking long, something is wrong</p>
            }

        </div>
        <div class="d-flex justify-content-center ">
            <button type="button" class="btn btn-secondary m-2 w-50" disabled="@RetryDisabled" @onclick="Retry">Retry</button>

            <button type="button" class="btn btn-secondary m-2 w-50" @onclick="Terminate">Terminate</button>

            <button type="button" class="btn btn-secondary m-2 w-50" @onclick="Override">Override</button>
        </div>

    </div>
    <div>

        @if (!_asp.GetAuthenticationStateAsync().Result.User.Identity.IsAuthenticated)
        {
            <p>You are not authorized, please <a href="Identity/Account/Login">Log In</a>.</p>
        }

    </div>
</div>




