@page "/Identity/Account/Logout"
@using AXOpen.Core;
@using AXOpen.Core.blazor.Toaster;
@using CommunityToolkit.Mvvm.Messaging;
@inject NavigationManager _navigationManager

@code{
    protected override void OnInitialized()
    {
        string name = SecurityManager.Manager.UserName;
        SecurityManager.Manager.Service.DeAuthenticateCurrentUser();
        //TcoAppDomain.Current.Logger.Information($"User '{name}' logged out. {{@sender}}", new { UserName = name });
        _navigationManager.NavigateTo("", forceLoad: true);
        WeakReferenceMessenger.Default.Send(new ToastMessage(new Toast("Success", "Loggout!", "User logged out.", 10)));
    }
}