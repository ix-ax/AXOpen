@namespace ix.framework.core.blazor.Toaster
@if (toastService.GetToasts() != null)
{
    <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 100;">
        @foreach (Toast toast in toastService.GetToasts())
        {
            var bg = "";
            var icon = "";
            switch (toast.Type)
            {
                case "Info":
                    bg = "bg-primary text-white";
                    icon = "oi oi-info";
                    break;
                case "Success":
                    bg = "bg-success text-white";
                    icon = "oi oi-circle-check";
                    break;
                case "Danger":
                    bg = "bg-danger text-white";
                    icon = "oi oi-circle-x";
                    break;
                case "Warning":
                    bg = "bg-warning text-dark";
                    icon = "oi oi-warning";
                    break;
            }

            <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header @bg">
                    <span class="@icon me-2" aria-hidden="true"></span>
                    <strong class="me-auto">@toast.Title</strong>
                    <small>@GetTime(toast.Posted)</small>
                    <button type="button" class="btn-close" @onclick="() => this.ClearToast(toast)"></button>
                </div>
                <div class="toast-body">
                    @toast.Message
                </div>
            </div>
        }
    </div>
}

@code {
    [Inject]
    private ToastService toastService { get; set; }

    private string GetTime(DateTimeOffset time)
    {
        var calcTime = -(time - DateTimeOffset.Now);
        if (calcTime.Seconds < 5)
        {
            return "just now";
        }
        else if (calcTime.Seconds < 60)
        {
            return $"{calcTime.Seconds} secs ago";
        }
        else
        {
            return $"{calcTime.Minutes} mins ago";
        }
    }
}