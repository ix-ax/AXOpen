@namespace AXOpen.Core.Blazor.AxoDialogs
@using AXOpen.Core.Blazor.AxoDialogs.Hubs;
@using AXOpen.Dialogs;
@using AXSharp.Connector;
@inject NavigationManager _navigationManager
@inject AxoDialogProxyService _dialogService
@implements IDisposable
<h1>cau</h1>


@if (_dialogService.DialogInstance != null )
{
    <RenderableContentControl Context="_dialogService.DialogInstance"
                              Presentation="Action"/>
}




@code {
    
    [Parameter]
    public IEnumerable<ITwinObject> ObservedObjects { get; set; }
    /// <summary>
    /// Pass unique value of last segment of URL, which will represent dialog id corresponding to actual page url.
    /// </summary>
    [Parameter]
    public string DialogId { get; set; }
    /// <summary>
    /// Delay for dialog open, if you have problem with dialogs open on slower PC, increase dialog dealay (Default value is 500 ms).
    /// </summary>
    [Parameter]
    public int DialogOpenDelay { get; set; }

    private bool _showDialog { get; set;}




    protected override void OnInitialized()
    {
        if (ObservedObjects != null)
            _dialogService.SetObservedObjects(ObservedObjects);
        
        Console.WriteLine("Base initialized");
        _dialogService.DialogInvoked += OnDialogInvoked;
        base.OnInitialized();   
    }


    public async void OnDialogInvoked()
    {
        Console.WriteLine("Invoke caught 1 - RCC create");
        await InvokeAsync(StateHasChanged);

    }
    
    public void Dispose()
    {
        _dialogService.DialogInvoked -= OnDialogInvoked;
    }

}
