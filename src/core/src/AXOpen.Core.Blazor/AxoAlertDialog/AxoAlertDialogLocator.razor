@*@namespace AXOpen.Core.Blazor.Dialogs
@using AXOpen.Base.Dialogs;
@using AXOpen.Core.Blazor.AxoDialogs.Hubs;
@using AXOpen.Core.Blazor.AxoDialogs;
@using AXOpen.Dialogs;
@using AXSharp.Connector;
@inject IAxoDialogProxyServiceSingleton _dialogService
@inject IAlertDialogService _alertDialogService
@implements IDisposable





@if (_dialogService.DialogInstance != null)
{
    if (_dialogService.DialogInstance is AXOpen.Core.AxoAlertDialog)
    {
        AXOpen.Core.AxoAlertDialog a = (AXOpen.Core.AxoAlertDialog)_dialogService.DialogInstance;
        _alertDialogService.AddAlertDialog( (eAlertDialogType)a._dialogType.Cyclic, a._title.Cyclic, a._message.Cyclic, a._timeToBurn.Cyclic);
        _dialogService.DialogInstance = null;
    }
}

@code {
    [Parameter]
    public IEnumerable<ITwinObject> ObservedObjects { get; set; }

    protected override void OnInitialized()
    {
        if (ObservedObjects != null)
            _dialogService.SetObservedObjects(ObservedObjects);
        
        _dialogService.DialogInvoked += OnDialogInvoked;
        base.OnInitialized();   
    }

    public async void OnDialogInvoked(object sender, AxoDialogEventArgs e)
    {
        if (_dialogService.DialogInstance is AXOpen.Core.AxoAlertDialog)
        {
            AXOpen.Core.AxoAlertDialog a = (AXOpen.Core.AxoAlertDialog)_dialogService.DialogInstance;
            _alertDialogService.AddAlertDialog((eAlertDialogType)a._dialogType.Cyclic, a._title.Cyclic, a._message.Cyclic, a._timeToBurn.Cyclic);
            _dialogService.DialogInstance = null;
        }
        await InvokeAsync(StateHasChanged);
    }
    
    public void Dispose()
    {
        _dialogService.DialogInvoked -= OnDialogInvoked;
    }
}
*@